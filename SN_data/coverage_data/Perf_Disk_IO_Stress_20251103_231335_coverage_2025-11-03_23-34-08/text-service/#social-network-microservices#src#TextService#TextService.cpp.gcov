        -:    0:Source:/social-network-microservices/src/TextService/TextService.cpp
        -:    0:Graph:/social-network-microservices/build/src/TextService/CMakeFiles/TextService.dir/TextService.cpp.gcno
        -:    0:Data:/social-network-microservices/build/src/TextService/CMakeFiles/TextService.dir/TextService.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include <signal.h>
        -:    2:#include <thrift/protocol/TBinaryProtocol.h>
        -:    3:#include <thrift/server/TThreadedServer.h>
        -:    4:#include <thrift/transport/TBufferTransports.h>
        -:    5:#include <thrift/transport/TServerSocket.h>
        -:    6:
        -:    7:#include "../utils.h"
        -:    8:#include "../utils_thrift.h"
        -:    9:#include "TextHandler.h"
        -:   10:
        -:   11:extern "C" void __gcov_flush();
        -:   12:
        -:   13:using apache::thrift::protocol::TBinaryProtocolFactory;
        -:   14:using apache::thrift::server::TThreadedServer;
        -:   15:using apache::thrift::transport::TFramedTransportFactory;
        -:   16:using apache::thrift::transport::TServerSocket;
        -:   17:using namespace social_network;
        -:   18:
function _Z13sigintHandleri called 0 returned 0% blocks executed 0%
    #####:   19:void sigintHandler(int sig) { exit(EXIT_SUCCESS); }
        -:   20:
function _Z14handle_sigusr1i called 1 returned 0% blocks executed 100%
        1:   21:void handle_sigusr1(int signum) {
        1:   22:  __gcov_flush();
call    0 returned 0%
    #####:   23:}
        -:   24:
function main called 1 returned 0% blocks executed 59%
        1:   25:int main(int argc, char *argv[]) {
        1:   26:  signal(SIGINT, sigintHandler);
call    0 returned 100%
        1:   27:  signal(SIGUSR1, handle_sigusr1);
call    0 returned 100%
        1:   28:  init_logger();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
        1:   29:  SetUpTracer("config/jaeger-config.yml", "text-service");
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
call    5 returned 100%
branch  6 taken 100% (fallthrough)
branch  7 taken 0% (throw)
call    8 returned 100%
branch  9 taken 100% (fallthrough)
branch 10 taken 0% (throw)
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
call   14 returned 100%
call   15 never executed
call   16 never executed
call   17 never executed
call   18 never executed
        -:   30:
        1:   31:  json config_json;
call    0 returned 100%
call    1 never executed
call    2 never executed
        1:   32:  if (load_config_file("config/service-config.json", &config_json) == 0) {
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
branch  9 taken 100% (fallthrough)
branch 10 taken 0%
call   11 never executed
call   12 never executed
call   13 never executed
        1:   33:    int port = config_json["text-service"]["port"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   34:
        1:   35:    std::string url_addr = config_json["url-shorten-service"]["addr"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 never executed
call   10 never executed
        1:   36:    int url_port = config_json["url-shorten-service"]["port"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   37:    int url_conns = config_json["url-shorten-service"]["connections"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   38:    int url_timeout = config_json["url-shorten-service"]["timeout_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   39:    int url_keepalive = config_json["url-shorten-service"]["keepalive_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   40:
        1:   41:    std::string user_mention_addr = config_json["user-mention-service"]["addr"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 never executed
call   10 never executed
        1:   42:    int user_mention_port = config_json["user-mention-service"]["port"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   43:    int user_mention_conns = config_json["user-mention-service"]["connections"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   44:    int user_mention_timeout =
        1:   45:        config_json["user-mention-service"]["timeout_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   46:    int user_mention_keepalive =
        1:   47:        config_json["user-mention-service"]["keepalive_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   48:
        -:   49:    ClientPool<ThriftClient<UrlShortenServiceClient>> url_client_pool(
        -:   50:        "url-shorten-service", url_addr, url_port, 0, url_conns, url_timeout,
        1:   51:        url_keepalive, config_json);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
call   11 never executed
call   12 never executed
        -:   52:
        -:   53:    ClientPool<ThriftClient<UserMentionServiceClient>> user_mention_pool(
        -:   54:        "user-mention-service", user_mention_addr, user_mention_port, 0,
        1:   55:        user_mention_conns, user_mention_timeout, user_mention_keepalive, config_json);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
call   11 never executed
call   12 never executed
        -:   56:
        1:   57:    std::shared_ptr<TServerSocket> server_socket = get_server_socket(config_json, "0.0.0.0", port);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
call   11 never executed
        -:   58:    TThreadedServer server(
        2:   59:        std::make_shared<TextServiceProcessor>(std::make_shared<TextHandler>(
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
call    7 returned 100%
call    8 never executed
call    9 never executed
        -:   60:            &url_client_pool, &user_mention_pool)),
        -:   61:        server_socket,
        2:   62:        std::make_shared<TFramedTransportFactory>(),
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        6:   63:        std::make_shared<TBinaryProtocolFactory>());
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
branch 14 taken 100% (fallthrough)
branch 15 taken 0% (throw)
call   16 returned 100%
call   17 returned 100%
call   18 returned 100%
call   19 returned 100%
call   20 returned 100%
call   21 returned 100%
call   22 never executed
call   23 never executed
call   24 never executed
call   25 never executed
call   26 never executed
call   27 never executed
call   28 never executed
        -:   64:
        2:   65:    LOG(info) << "Starting the text-service server...";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
call   48 never executed
call   49 never executed
        1:   66:    server.serve();
call    0 returned 0%
branch  1 taken 0% (fallthrough)
branch  2 taken 0% (throw)
        -:   67:  } else
    #####:   68:    exit(EXIT_FAILURE);
call    0 never executed
function _GLOBAL__sub_I__ZN14social_network11init_loggerEv called 1 returned 100% blocks executed 100%
function _Z41__static_initialization_and_destruction_0ii called 1 returned 100% blocks executed 100%
        3:   69:}
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0%
branch  3 taken 100% (fallthrough)
branch  4 taken 0%
