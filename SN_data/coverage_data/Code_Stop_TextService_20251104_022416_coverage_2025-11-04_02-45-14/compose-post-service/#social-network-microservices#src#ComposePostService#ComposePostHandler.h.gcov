        -:    0:Source:/social-network-microservices/src/ComposePostService/ComposePostHandler.h
        -:    0:Graph:/social-network-microservices/build/src/ComposePostService/CMakeFiles/ComposePostService.dir/ComposePostService.cpp.gcno
        -:    0:Data:/social-network-microservices/build/src/ComposePostService/CMakeFiles/ComposePostService.dir/ComposePostService.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#ifndef SOCIAL_NETWORK_MICROSERVICES_SRC_COMPOSEPOSTSERVICE_COMPOSEPOSTHANDLER_H_
        -:    2:#define SOCIAL_NETWORK_MICROSERVICES_SRC_COMPOSEPOSTSERVICE_COMPOSEPOSTHANDLER_H_
        -:    3:
        -:    4:#include <chrono>
        -:    5:#include <future>
        -:    6:#include <iostream>
        -:    7:#include <nlohmann/json.hpp>
        -:    8:#include <string>
        -:    9:#include <vector>
        -:   10:
        -:   11:#include "../../gen-cpp/ComposePostService.h"
        -:   12:#include "../../gen-cpp/HomeTimelineService.h"
        -:   13:#include "../../gen-cpp/MediaService.h"
        -:   14:#include "../../gen-cpp/PostStorageService.h"
        -:   15:#include "../../gen-cpp/TextService.h"
        -:   16:#include "../../gen-cpp/UniqueIdService.h"
        -:   17:#include "../../gen-cpp/UserService.h"
        -:   18:#include "../../gen-cpp/UserTimelineService.h"
        -:   19:#include "../../gen-cpp/social_network_types.h"
        -:   20:#include "../ClientPool.h"
        -:   21:#include "../ThriftClient.h"
        -:   22:#include "../logger.h"
        -:   23:#include "../tracing.h"
        -:   24:
        -:   25:namespace social_network {
        -:   26:using json = nlohmann::json;
        -:   27:using std::chrono::duration_cast;
        -:   28:using std::chrono::milliseconds;
        -:   29:using std::chrono::system_clock;
        -:   30:
        -:   31:class ComposePostHandler : public ComposePostServiceIf {
        -:   32: public:
        -:   33:  ComposePostHandler(ClientPool<ThriftClient<PostStorageServiceClient>> *,
        -:   34:                     ClientPool<ThriftClient<UserTimelineServiceClient>> *,
        -:   35:                     ClientPool<ThriftClient<UserServiceClient>> *,
        -:   36:                     ClientPool<ThriftClient<UniqueIdServiceClient>> *,
        -:   37:                     ClientPool<ThriftClient<MediaServiceClient>> *,
        -:   38:                     ClientPool<ThriftClient<TextServiceClient>> *,
        -:   39:                     ClientPool<ThriftClient<HomeTimelineServiceClient>> *);
function _ZN14social_network18ComposePostHandlerD0Ev called 0 returned 0% blocks executed 0%
function _ZN14social_network18ComposePostHandlerD2Ev called 0 returned 0% blocks executed 0%
    #####:   40:  ~ComposePostHandler() override = default;
call    0 never executed
call    1 never executed
call    2 never executed
branch  3 never executed
branch  4 never executed
call    5 never executed
        -:   41:
        -:   42:  void ComposePost(int64_t req_id, const std::string &username, int64_t user_id,
        -:   43:                   const std::string &text,
        -:   44:                   const std::vector<int64_t> &media_ids,
        -:   45:                   const std::vector<std::string> &media_types,
        -:   46:                   PostType::type post_type,
        -:   47:                   const std::map<std::string, std::string> &carrier) override;
        -:   48:
        -:   49: private:
        -:   50:  ClientPool<ThriftClient<PostStorageServiceClient>> *_post_storage_client_pool;
        -:   51:  ClientPool<ThriftClient<UserTimelineServiceClient>>
        -:   52:      *_user_timeline_client_pool;
        -:   53:
        -:   54:  ClientPool<ThriftClient<UserServiceClient>> *_user_service_client_pool;
        -:   55:  ClientPool<ThriftClient<UniqueIdServiceClient>>
        -:   56:      *_unique_id_service_client_pool;
        -:   57:  ClientPool<ThriftClient<MediaServiceClient>> *_media_service_client_pool;
        -:   58:  ClientPool<ThriftClient<TextServiceClient>> *_text_service_client_pool;
        -:   59:  ClientPool<ThriftClient<HomeTimelineServiceClient>>
        -:   60:      *_home_timeline_client_pool;
        -:   61:
        -:   62:  void _UploadUserTimelineHelper(
        -:   63:      int64_t req_id, int64_t post_id, int64_t user_id, int64_t timestamp,
        -:   64:      const std::map<std::string, std::string> &carrier);
        -:   65:
        -:   66:  void _UploadPostHelper(int64_t req_id, const Post &post,
        -:   67:                         const std::map<std::string, std::string> &carrier);
        -:   68:
        -:   69:  void _UploadHomeTimelineHelper(
        -:   70:      int64_t req_id, int64_t post_id, int64_t user_id, int64_t timestamp,
        -:   71:      const std::vector<int64_t> &user_mentions_id,
        -:   72:      const std::map<std::string, std::string> &carrier);
        -:   73:
        -:   74:  Creator _ComposeCreaterHelper(
        -:   75:      int64_t req_id, int64_t user_id, const std::string &username,
        -:   76:      const std::map<std::string, std::string> &carrier);
        -:   77:  TextServiceReturn _ComposeTextHelper(
        -:   78:      int64_t req_id, const std::string &text,
        -:   79:      const std::map<std::string, std::string> &carrier);
        -:   80:  std::vector<Media> _ComposeMediaHelper(
        -:   81:      int64_t req_id, const std::vector<std::string> &media_types,
        -:   82:      const std::vector<int64_t> &media_ids,
        -:   83:      const std::map<std::string, std::string> &carrier);
        -:   84:  int64_t _ComposeUniqueIdHelper(
        -:   85:      int64_t req_id, PostType::type post_type,
        -:   86:      const std::map<std::string, std::string> &carrier);
        -:   87:};
        -:   88:
function _ZN14social_network18ComposePostHandlerC2EPNS_10ClientPoolINS_12ThriftClientINS_24PostStorageServiceClientEEEEEPNS1_INS2_INS_25UserTimelineServiceClientEEEEEPNS1_INS2_INS_17UserServiceClientEEEEEPNS1_INS2_INS_21UniqueIdServiceClientEEEEEPNS1_INS2_INS_18MediaServiceClientEEEEEPNS1_INS2_INS_17TextServiceClientEEEEEPNS1_INS2_INS_25HomeTimelineServiceClientEEEEE called 1 returned 100% blocks executed 100%
        1:   89:ComposePostHandler::ComposePostHandler(
        -:   90:    ClientPool<social_network::ThriftClient<PostStorageServiceClient>>
        -:   91:        *post_storage_client_pool,
        -:   92:    ClientPool<social_network::ThriftClient<UserTimelineServiceClient>>
        -:   93:        *user_timeline_client_pool,
        -:   94:    ClientPool<ThriftClient<UserServiceClient>> *user_service_client_pool,
        -:   95:    ClientPool<ThriftClient<UniqueIdServiceClient>>
        -:   96:        *unique_id_service_client_pool,
        -:   97:    ClientPool<ThriftClient<MediaServiceClient>> *media_service_client_pool,
        -:   98:    ClientPool<ThriftClient<TextServiceClient>> *text_service_client_pool,
        -:   99:    ClientPool<ThriftClient<HomeTimelineServiceClient>>
        1:  100:        *home_timeline_client_pool) {
call    0 returned 100%
        1:  101:  _post_storage_client_pool = post_storage_client_pool;
        1:  102:  _user_timeline_client_pool = user_timeline_client_pool;
        1:  103:  _user_service_client_pool = user_service_client_pool;
        1:  104:  _unique_id_service_client_pool = unique_id_service_client_pool;
        1:  105:  _media_service_client_pool = media_service_client_pool;
        1:  106:  _text_service_client_pool = text_service_client_pool;
        1:  107:  _home_timeline_client_pool = home_timeline_client_pool;
        1:  108:}
        -:  109:
function _ZN14social_network18ComposePostHandler21_ComposeCreaterHelperEllRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERKSt3mapIS6_S6_St4lessIS6_ESaISt4pairIS7_S6_EEE called 200 returned 100% blocks executed 29%
      200:  110:Creator ComposePostHandler::_ComposeCreaterHelper(
        -:  111:    int64_t req_id, int64_t user_id, const std::string &username,
        -:  112:    const std::map<std::string, std::string> &carrier) {
      400:  113:  TextMapReader reader(carrier);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  114:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
branch  3 taken 100% (fallthrough)
branch  4 taken 0% (throw)
call    5 returned 100%
call    6 returned 100%
call    7 never executed
      400:  115:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 returned 100%
      800:  116:      "compose_creator_client", {opentracing::ChildOf(parent_span->get())});
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 never executed
      400:  117:  std::map<std::string, std::string> writer_text_map;
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  118:  TextMapWriter writer(writer_text_map);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      200:  119:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
        -:  120:
      200:  121:  auto user_client_wrapper = _user_service_client_pool->Pop();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  122:  if (!user_client_wrapper) {
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
    #####:  123:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  124:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  125:    se.message = "Failed to connect to user-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  126:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    #####:  127:    span->Finish();
call    0 never executed
call    1 never executed
    #####:  128:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  129:  }
        -:  130:
      200:  131:  auto user_client = user_client_wrapper->GetClient();
call    0 returned 100%
      200:  132:  Creator _return_creator;
call    0 returned 100%
        -:  133:  try {
        -:  134:    user_client->ComposeCreatorWithUserId(_return_creator, req_id, user_id,
      200:  135:                                          username, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
    =====:  136:  } catch (...) {
call    0 never executed
call    1 never executed
call    2 never executed
    =====:  137:    LOG(error) << "Failed to send compose-creator to user-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  138:    _user_service_client_pool->Remove(user_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  139:    span->Finish();
call    0 never executed
call    1 never executed
    =====:  140:    throw;
call    0 never executed
        -:  141:  }
      200:  142:  _user_service_client_pool->Keepalive(user_client_wrapper);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  143:  span->Finish();
call    0 returned 100%
call    1 returned 100%
      400:  144:  return _return_creator;
call    0 never executed
        -:  145:}
        -:  146:
function _ZN14social_network18ComposePostHandler18_ComposeTextHelperElRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERKSt3mapIS6_S6_St4lessIS6_ESaISt4pairIS7_S6_EEE called 200 returned 0% blocks executed 26%
      200:  147:TextServiceReturn ComposePostHandler::_ComposeTextHelper(
        -:  148:    int64_t req_id, const std::string &text,
        -:  149:    const std::map<std::string, std::string> &carrier) {
      400:  150:  TextMapReader reader(carrier);
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      400:  151:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
branch  3 taken 100% (fallthrough)
branch  4 taken 0% (throw)
call    5 returned 100%
call    6 never executed
call    7 returned 100%
      400:  152:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 returned 100%
      800:  153:      "compose_text_client", {opentracing::ChildOf(parent_span->get())});
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 never executed
call   12 returned 100%
      400:  154:  std::map<std::string, std::string> writer_text_map;
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      400:  155:  TextMapWriter writer(writer_text_map);
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      200:  156:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
        -:  157:
      200:  158:  auto text_client_wrapper = _text_service_client_pool->Pop();
call    0 returned 100%
branch  1 taken 0% (fallthrough)
branch  2 taken 100% (throw)
    #####:  159:  if (!text_client_wrapper) {
branch  0 never executed
branch  1 never executed
    #####:  160:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  161:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  162:    se.message = "Failed to connect to text-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  163:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
        -:  164:    ;
    #####:  165:    span->Finish();
call    0 never executed
call    1 never executed
    #####:  166:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  167:  }
        -:  168:
    #####:  169:  auto text_client = text_client_wrapper->GetClient();
call    0 never executed
    #####:  170:  TextServiceReturn _return_text;
call    0 never executed
        -:  171:  try {
    #####:  172:    text_client->ComposeText(_return_text, req_id, text, writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  173:  } catch (...) {
call    0 never executed
call    1 never executed
call    2 never executed
    =====:  174:    LOG(error) << "Failed to send compose-text to text-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  175:    _text_service_client_pool->Remove(text_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  176:    span->Finish();
call    0 never executed
call    1 never executed
    =====:  177:    throw;
call    0 never executed
        -:  178:  }
    #####:  179:  _text_service_client_pool->Keepalive(text_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  180:  span->Finish();
call    0 never executed
call    1 never executed
    #####:  181:  return _return_text;
call    0 never executed
        -:  182:}
        -:  183:
function _ZN14social_network18ComposePostHandler19_ComposeMediaHelperElRKSt6vectorINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEESaIS7_EERKS1_IlSaIlEERKSt3mapIS7_S7_St4lessIS7_ESaISt4pairIKS7_S7_EEE called 200 returned 100% blocks executed 29%
      200:  184:std::vector<Media> ComposePostHandler::_ComposeMediaHelper(
        -:  185:    int64_t req_id, const std::vector<std::string> &media_types,
        -:  186:    const std::vector<int64_t> &media_ids,
        -:  187:    const std::map<std::string, std::string> &carrier) {
      400:  188:  TextMapReader reader(carrier);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  189:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
branch  3 taken 100% (fallthrough)
branch  4 taken 0% (throw)
call    5 returned 100%
call    6 returned 100%
call    7 never executed
      400:  190:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 returned 100%
      800:  191:      "compose_media_client", {opentracing::ChildOf(parent_span->get())});
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 never executed
      400:  192:  std::map<std::string, std::string> writer_text_map;
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  193:  TextMapWriter writer(writer_text_map);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      200:  194:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
        -:  195:
      200:  196:  auto media_client_wrapper = _media_service_client_pool->Pop();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  197:  if (!media_client_wrapper) {
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
    #####:  198:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  199:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  200:    se.message = "Failed to connect to media-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  201:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
        -:  202:    ;
    #####:  203:    span->Finish();
call    0 never executed
call    1 never executed
    #####:  204:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  205:  }
        -:  206:
      200:  207:  auto media_client = media_client_wrapper->GetClient();
call    0 returned 100%
      200:  208:  std::vector<Media> _return_media;
call    0 returned 100%
        -:  209:  try {
        -:  210:    media_client->ComposeMedia(_return_media, req_id, media_types, media_ids,
      200:  211:                               writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
    =====:  212:  } catch (...) {
call    0 never executed
call    1 never executed
call    2 never executed
    =====:  213:    LOG(error) << "Failed to send compose-media to media-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  214:    _media_service_client_pool->Remove(media_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  215:    span->Finish();
call    0 never executed
call    1 never executed
    =====:  216:    throw;
call    0 never executed
        -:  217:  }
      200:  218:  _media_service_client_pool->Keepalive(media_client_wrapper);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  219:  span->Finish();
call    0 returned 100%
call    1 returned 100%
      400:  220:  return _return_media;
call    0 never executed
        -:  221:}
        -:  222:
function _ZN14social_network18ComposePostHandler22_ComposeUniqueIdHelperElNS_8PostType4typeERKSt3mapINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES9_St4lessIS9_ESaISt4pairIKS9_S9_EEE called 200 returned 100% blocks executed 28%
      200:  223:int64_t ComposePostHandler::_ComposeUniqueIdHelper(
        -:  224:    int64_t req_id, const PostType::type post_type,
        -:  225:    const std::map<std::string, std::string> &carrier) {
      400:  226:  TextMapReader reader(carrier);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  227:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
branch  3 taken 100% (fallthrough)
branch  4 taken 0% (throw)
call    5 returned 100%
call    6 returned 100%
call    7 never executed
      400:  228:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 returned 100%
      800:  229:      "compose_unique_id_client", {opentracing::ChildOf(parent_span->get())});
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 never executed
      400:  230:  std::map<std::string, std::string> writer_text_map;
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      400:  231:  TextMapWriter writer(writer_text_map);
call    0 returned 100%
call    1 returned 100%
call    2 never executed
      200:  232:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
        -:  233:
      200:  234:  auto unique_id_client_wrapper = _unique_id_service_client_pool->Pop();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  235:  if (!unique_id_client_wrapper) {
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
    #####:  236:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  237:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  238:    se.message = "Failed to connect to unique_id-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  239:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    #####:  240:    span->Finish();
call    0 never executed
call    1 never executed
    #####:  241:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  242:  }
        -:  243:
      200:  244:  auto unique_id_client = unique_id_client_wrapper->GetClient();
call    0 returned 100%
        -:  245:  int64_t _return_unique_id;
        -:  246:  try {
        -:  247:    _return_unique_id =
      200:  248:        unique_id_client->ComposeUniqueId(req_id, post_type, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
    =====:  249:  } catch (...) {
call    0 never executed
call    1 never executed
    =====:  250:    LOG(error) << "Failed to send compose-unique_id to unique_id-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  251:    _unique_id_service_client_pool->Remove(unique_id_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  252:    span->Finish();
call    0 never executed
call    1 never executed
    =====:  253:    throw;
call    0 never executed
        -:  254:  }
      200:  255:  _unique_id_service_client_pool->Keepalive(unique_id_client_wrapper);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      200:  256:  span->Finish();
call    0 returned 100%
call    1 returned 100%
      400:  257:  return _return_unique_id;
call    0 never executed
        -:  258:}
        -:  259:
function _ZN14social_network18ComposePostHandler17_UploadPostHelperElRKNS_4PostERKSt3mapINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEESA_St4lessISA_ESaISt4pairIKSA_SA_EEE called 0 returned 0% blocks executed 0%
    #####:  260:void ComposePostHandler::_UploadPostHelper(
        -:  261:    int64_t req_id, const Post &post,
        -:  262:    const std::map<std::string, std::string> &carrier) {
        -:  263:  
    #####:  264:  LOG(info) << "start upload post to storage service [req_id=" << req_id << ", post_id=" << post.post_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
branch 54 never executed
branch 55 never executed
call   56 never executed
branch 57 never executed
branch 58 never executed
call   59 never executed
call   60 never executed
call   61 never executed
call   62 never executed
        -:  265:  
    #####:  266:  TextMapReader reader(carrier);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  267:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 never executed
call    1 never executed
call    2 never executed
branch  3 never executed
branch  4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
    #####:  268:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 never executed
    #####:  269:      "store_post_client", {opentracing::ChildOf(parent_span->get())});
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
call   10 never executed
call   11 never executed
call   12 never executed
    #####:  270:  std::map<std::string, std::string> writer_text_map;
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  271:  TextMapWriter writer(writer_text_map);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  272:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 never executed
call    1 never executed
call    2 never executed
call    3 never executed
call    4 never executed
branch  5 never executed
branch  6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
        -:  273:
    #####:  274:  auto post_storage_client_wrapper = _post_storage_client_pool->Pop();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  275:  if (!post_storage_client_wrapper) {
branch  0 never executed
branch  1 never executed
    #####:  276:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  277:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  278:    se.message = "Failed to connect to post-storage-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  279:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
        -:  280:    ;
    #####:  281:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  282:  }
    #####:  283:  auto post_storage_client = post_storage_client_wrapper->GetClient();
call    0 never executed
        -:  284:  try {
    #####:  285:    post_storage_client->StorePost(req_id, post, writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  286:    LOG(info) << "post storage completed [req_id=" << req_id << ", post_id=" << post.post_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
branch 54 never executed
branch 55 never executed
call   56 never executed
branch 57 never executed
branch 58 never executed
call   59 never executed
call   60 never executed
call   61 never executed
    =====:  287:  } catch (...) {
call    0 never executed
call    1 never executed
    =====:  288:    _post_storage_client_pool->Remove(post_storage_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  289:    LOG(error) << "Failed to store post to post-storage-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  290:    throw;
call    0 never executed
        -:  291:  }
    #####:  292:  _post_storage_client_pool->Keepalive(post_storage_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
        -:  293:
    #####:  294:  span->Finish();
call    0 never executed
call    1 never executed
    #####:  295:  LOG(info) << "finish upload post to storage service [req_id=" << req_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
call   54 never executed
call   55 never executed
    #####:  296:}
        -:  297:
function _ZN14social_network18ComposePostHandler25_UploadUserTimelineHelperEllllRKSt3mapINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES7_St4lessIS7_ESaISt4pairIKS7_S7_EEE called 0 returned 0% blocks executed 0%
    #####:  298:void ComposePostHandler::_UploadUserTimelineHelper(
        -:  299:    int64_t req_id, int64_t post_id, int64_t user_id, int64_t timestamp,
        -:  300:    const std::map<std::string, std::string> &carrier) {
    #####:  301:  TextMapReader reader(carrier);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  302:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 never executed
call    1 never executed
call    2 never executed
branch  3 never executed
branch  4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
    #####:  303:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 never executed
    #####:  304:      "write_user_timeline_client", {opentracing::ChildOf(parent_span->get())});
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
call   10 never executed
call   11 never executed
call   12 never executed
    #####:  305:  std::map<std::string, std::string> writer_text_map;
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  306:  TextMapWriter writer(writer_text_map);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  307:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 never executed
call    1 never executed
call    2 never executed
call    3 never executed
call    4 never executed
branch  5 never executed
branch  6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
        -:  308:
    #####:  309:  auto user_timeline_client_wrapper = _user_timeline_client_pool->Pop();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  310:  if (!user_timeline_client_wrapper) {
branch  0 never executed
branch  1 never executed
    #####:  311:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  312:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  313:    se.message = "Failed to connect to user-timeline-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  314:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
        -:  315:    ;
    #####:  316:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  317:  }
    #####:  318:  auto user_timeline_client = user_timeline_client_wrapper->GetClient();
call    0 never executed
        -:  319:  try {
        -:  320:    user_timeline_client->WriteUserTimeline(req_id, post_id, user_id, timestamp,
    #####:  321:                                            writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  322:  } catch (...) {
call    0 never executed
call    1 never executed
    =====:  323:    _user_timeline_client_pool->Remove(user_timeline_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  324:    throw;
call    0 never executed
        -:  325:  }
    #####:  326:  _user_timeline_client_pool->Keepalive(user_timeline_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
        -:  327:
    #####:  328:  span->Finish();
call    0 never executed
call    1 never executed
    #####:  329:}
call    0 never executed
        -:  330:
function _ZN14social_network18ComposePostHandler25_UploadHomeTimelineHelperEllllRKSt6vectorIlSaIlEERKSt3mapINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEESC_St4lessISC_ESaISt4pairIKSC_SC_EEE called 0 returned 0% blocks executed 0%
    #####:  331:void ComposePostHandler::_UploadHomeTimelineHelper(
        -:  332:    int64_t req_id, int64_t post_id, int64_t user_id, int64_t timestamp,
        -:  333:    const std::vector<int64_t> &user_mentions_id,
        -:  334:    const std::map<std::string, std::string> &carrier) {
    #####:  335:  TextMapReader reader(carrier);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  336:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 never executed
call    1 never executed
call    2 never executed
branch  3 never executed
branch  4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
    #####:  337:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 never executed
    #####:  338:      "write_home_timeline_client", {opentracing::ChildOf(parent_span->get())});
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
call   10 never executed
call   11 never executed
call   12 never executed
    #####:  339:  std::map<std::string, std::string> writer_text_map;
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  340:  TextMapWriter writer(writer_text_map);
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  341:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 never executed
call    1 never executed
call    2 never executed
call    3 never executed
call    4 never executed
branch  5 never executed
branch  6 never executed
call    7 never executed
call    8 never executed
call    9 never executed
        -:  342:
    #####:  343:  auto home_timeline_client_wrapper = _home_timeline_client_pool->Pop();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  344:  if (!home_timeline_client_wrapper) {
branch  0 never executed
branch  1 never executed
    #####:  345:    ServiceException se;
call    0 never executed
call    1 never executed
    #####:  346:    se.errorCode = ErrorCode::SE_THRIFT_CONN_ERROR;
    #####:  347:    se.message = "Failed to connect to home-timeline-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  348:    LOG(error) << se.message;
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
        -:  349:    ;
    #####:  350:    throw se;
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:  351:  }
    #####:  352:  auto home_timeline_client = home_timeline_client_wrapper->GetClient();
call    0 never executed
        -:  353:  try {
        -:  354:    home_timeline_client->WriteHomeTimeline(req_id, post_id, user_id, timestamp,
    #####:  355:                                            user_mentions_id, writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  356:  } catch (...) {
call    0 never executed
call    1 never executed
    =====:  357:    _home_timeline_client_pool->Remove(home_timeline_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
    =====:  358:    LOG(error) << "Failed to write home timeline to home-timeline-service";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
call   48 never executed
call   49 never executed
    =====:  359:    throw;
call    0 never executed
        -:  360:  }
    #####:  361:  _home_timeline_client_pool->Keepalive(home_timeline_client_wrapper);
call    0 never executed
branch  1 never executed
branch  2 never executed
        -:  362:
    #####:  363:  span->Finish();
call    0 never executed
call    1 never executed
    #####:  364:}
call    0 never executed
        -:  365:
function _ZN14social_network18ComposePostHandler11ComposePostElRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEElS8_RKSt6vectorIlSaIlEERKS9_IS6_SaIS6_EENS_8PostType4typeERKSt3mapIS6_S6_St4lessIS6_ESaISt4pairIS7_S6_EEE called 200 returned 0% blocks executed 38%
      200:  366:void ComposePostHandler::ComposePost(
        -:  367:    const int64_t req_id, const std::string &username, int64_t user_id,
        -:  368:    const std::string &text, const std::vector<int64_t> &media_ids,
        -:  369:    const std::vector<std::string> &media_types, const PostType::type post_type,
        -:  370:    const std::map<std::string, std::string> &carrier) {
        -:  371:  
      400:  372:  LOG(info) << "start process compose post request [req_id=" << req_id << ", user=" << username << "]";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
branch 48 taken 100% (fallthrough)
branch 49 taken 0% (throw)
call   50 returned 100%
branch 51 taken 100% (fallthrough)
branch 52 taken 0% (throw)
call   53 returned 100%
branch 54 taken 100% (fallthrough)
branch 55 taken 0% (throw)
call   56 returned 100%
branch 57 taken 100% (fallthrough)
branch 58 taken 0% (throw)
call   59 returned 100%
call   60 never executed
call   61 never executed
call   62 never executed
        -:  373:  
      400:  374:  TextMapReader reader(carrier);
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      400:  375:  auto parent_span = opentracing::Tracer::Global()->Extract(reader);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
branch  3 taken 100% (fallthrough)
branch  4 taken 0% (throw)
call    5 returned 100%
call    6 never executed
call    7 returned 100%
      400:  376:  auto span = opentracing::Tracer::Global()->StartSpan(
call    0 returned 100%
      800:  377:      "compose_post_server", {opentracing::ChildOf(parent_span->get())});
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 never executed
call   12 returned 100%
      400:  378:  std::map<std::string, std::string> writer_text_map;
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      400:  379:  TextMapWriter writer(writer_text_map);
call    0 returned 100%
call    1 never executed
call    2 returned 100%
      200:  380:  opentracing::Tracer::Global()->Inject(span->context(), writer);
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
        -:  381:
        -:  382:  auto text_future =
        -:  383:      std::async(std::launch::async, &ComposePostHandler::_ComposeTextHelper,
      400:  384:                 this, req_id, text, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 never executed
call    4 returned 100%
        -:  385:  auto creator_future =
        -:  386:      std::async(std::launch::async, &ComposePostHandler::_ComposeCreaterHelper,
      400:  387:                 this, req_id, user_id, username, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 never executed
call    4 returned 100%
        -:  388:  auto media_future =
        -:  389:      std::async(std::launch::async, &ComposePostHandler::_ComposeMediaHelper,
      400:  390:                 this, req_id, media_types, media_ids, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 never executed
call    4 returned 100%
        -:  391:  auto unique_id_future = std::async(
        -:  392:      std::launch::async, &ComposePostHandler::_ComposeUniqueIdHelper, this,
      400:  393:      req_id, post_type, writer_text_map);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 never executed
call    4 returned 100%
        -:  394:
      400:  395:  Post post;
call    0 returned 100%
call    1 never executed
call    2 returned 100%
        -:  396:  auto timestamp =
      400:  397:      duration_cast<milliseconds>(system_clock::now().time_since_epoch())
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
      200:  398:          .count();
call    0 returned 100%
      200:  399:  post.timestamp = timestamp;
        -:  400:
      200:  401:  post.post_id = unique_id_future.get();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
      400:  402:  LOG(info) << "get unique id: " << post.post_id << " [req_id=" << req_id << "]";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
branch 48 taken 100% (fallthrough)
branch 49 taken 0% (throw)
call   50 returned 100%
branch 51 taken 100% (fallthrough)
branch 52 taken 0% (throw)
call   53 returned 100%
branch 54 taken 100% (fallthrough)
branch 55 taken 0% (throw)
call   56 returned 100%
branch 57 taken 100% (fallthrough)
branch 58 taken 0% (throw)
call   59 returned 100%
call   60 never executed
call   61 never executed
        -:  403:  
      200:  404:  post.creator = creator_future.get();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
call    7 never executed
      400:  405:  LOG(info) << "get creator info [req_id=" << req_id << "]";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
branch 48 taken 100% (fallthrough)
branch 49 taken 0% (throw)
call   50 returned 100%
branch 51 taken 100% (fallthrough)
branch 52 taken 0% (throw)
call   53 returned 100%
call   54 never executed
call   55 never executed
        -:  406:  
      200:  407:  post.media = media_future.get();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
      400:  408:  LOG(info) << "get media info, media count: " << post.media.size() << " [req_id=" << req_id << "]";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
call   13 returned 100%
branch 14 taken 100% (fallthrough)
branch 15 taken 0%
call   16 returned 100%
call   17 returned 100%
branch 18 taken 100% (fallthrough)
branch 19 taken 0% (throw)
call   20 returned 100%
call   21 returned 100%
branch 22 taken 100% (fallthrough)
branch 23 taken 0% (throw)
call   24 returned 100%
branch 25 taken 100% (fallthrough)
branch 26 taken 0% (throw)
call   27 returned 100%
branch 28 taken 100% (fallthrough)
branch 29 taken 0% (throw)
call   30 returned 100%
branch 31 taken 100% (fallthrough)
branch 32 taken 0% (throw)
call   33 returned 100%
branch 34 taken 100% (fallthrough)
branch 35 taken 0% (throw)
call   36 returned 100%
branch 37 taken 100% (fallthrough)
branch 38 taken 0% (throw)
call   39 returned 100%
branch 40 taken 100% (fallthrough)
branch 41 taken 0% (throw)
call   42 returned 100%
branch 43 taken 100% (fallthrough)
branch 44 taken 0% (throw)
call   45 returned 100%
branch 46 taken 100% (fallthrough)
branch 47 taken 0% (throw)
call   48 returned 100%
branch 49 taken 100% (fallthrough)
branch 50 taken 0% (throw)
call   51 returned 100%
branch 52 taken 100% (fallthrough)
branch 53 taken 0% (throw)
call   54 returned 100%
branch 55 taken 100% (fallthrough)
branch 56 taken 0% (throw)
call   57 returned 100%
branch 58 taken 100% (fallthrough)
branch 59 taken 0% (throw)
call   60 returned 100%
call   61 never executed
call   62 never executed
        -:  409:  
      200:  410:  auto text_return = text_future.get();
call    0 returned 100%
branch  1 taken 0% (fallthrough)
branch  2 taken 100% (throw)
call    3 never executed
call    4 never executed
    #####:  411:  post.text = text_return.text;
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  412:  post.urls = text_return.urls;
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  413:  post.user_mentions = text_return.user_mentions;
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  414:  LOG(info) << "get text info, text length: " << post.text.length() 
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
call   13 never executed
branch 14 never executed
branch 15 never executed
call   16 never executed
call   17 never executed
branch 18 never executed
branch 19 never executed
call   20 never executed
call   21 never executed
branch 22 never executed
branch 23 never executed
call   24 never executed
branch 25 never executed
branch 26 never executed
call   27 never executed
branch 28 never executed
branch 29 never executed
call   30 never executed
branch 31 never executed
branch 32 never executed
call   33 never executed
branch 34 never executed
branch 35 never executed
call   36 never executed
branch 37 never executed
branch 38 never executed
call   39 never executed
branch 40 never executed
branch 41 never executed
call   42 never executed
branch 43 never executed
branch 44 never executed
call   45 never executed
branch 46 never executed
branch 47 never executed
call   48 never executed
branch 49 never executed
branch 50 never executed
call   51 never executed
call   52 never executed
call   53 never executed
    #####:  415:             << ", user mention count: " << post.user_mentions.size()
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
branch  5 never executed
branch  6 never executed
    #####:  416:             << " [req_id=" << req_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
        -:  417:  
    #####:  418:  post.req_id = req_id;
    #####:  419:  post.post_type = post_type;
        -:  420:
    #####:  421:  std::vector<int64_t> user_mention_ids;
call    0 never executed
call    1 never executed
call    2 never executed
    #####:  422:  for (auto &item : post.user_mentions) {
call    0 never executed
call    1 never executed
call    2 never executed
branch  3 never executed
branch  4 never executed
call    5 never executed
call    6 never executed
    #####:  423:    user_mention_ids.emplace_back(item.user_id);
call    0 never executed
branch  1 never executed
branch  2 never executed
        -:  424:  }
        -:  425:
        -:  426:  //In mixed workloed condition, need to make sure _UploadPostHelper execute
        -:  427:  //Before _UploadUserTimelineHelper and _UploadHomeTimelineHelper.
        -:  428:  //Change _UploadUserTimelineHelper and _UploadHomeTimelineHelper to deferred.
        -:  429:  //To let them start execute after post_future.get() return.
        -:  430:  auto post_future =
        -:  431:      std::async(std::launch::async, &ComposePostHandler::_UploadPostHelper,
    #####:  432:                 this, req_id, post, writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
        -:  433:  auto user_timeline_future = std::async(
        -:  434:      std::launch::deferred, &ComposePostHandler::_UploadUserTimelineHelper, this,
    #####:  435:      req_id, post.post_id, user_id, timestamp, writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
        -:  436:  auto home_timeline_future = std::async(
        -:  437:      std::launch::deferred, &ComposePostHandler::_UploadHomeTimelineHelper, this,
        -:  438:      req_id, post.post_id, user_id, timestamp, user_mention_ids,
    #####:  439:      writer_text_map);
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
call    4 never executed
        -:  440:
    #####:  441:  post_future.get();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  442:  LOG(info) << "post storage completed [req_id=" << req_id << ", post_id=" << post.post_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
branch 54 never executed
branch 55 never executed
call   56 never executed
branch 57 never executed
branch 58 never executed
call   59 never executed
call   60 never executed
call   61 never executed
        -:  443:  
    #####:  444:  user_timeline_future.get();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  445:  LOG(info) << "user timeline update completed [req_id=" << req_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
call   54 never executed
call   55 never executed
        -:  446:  
    #####:  447:  home_timeline_future.get();
call    0 never executed
branch  1 never executed
branch  2 never executed
    #####:  448:  LOG(info) << "home timeline update completed [req_id=" << req_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
call   54 never executed
call   55 never executed
        -:  449:  
    #####:  450:  span->Finish();
call    0 never executed
call    1 never executed
    #####:  451:  LOG(info) << "compose post request completed [req_id=" << req_id << ", post_id=" << post.post_id << "]";
call    0 never executed
branch  1 never executed
branch  2 never executed
call    3 never executed
branch  4 never executed
branch  5 never executed
call    6 never executed
branch  7 never executed
branch  8 never executed
call    9 never executed
branch 10 never executed
branch 11 never executed
call   12 never executed
branch 13 never executed
branch 14 never executed
call   15 never executed
call   16 never executed
branch 17 never executed
branch 18 never executed
call   19 never executed
call   20 never executed
branch 21 never executed
branch 22 never executed
call   23 never executed
branch 24 never executed
branch 25 never executed
call   26 never executed
branch 27 never executed
branch 28 never executed
call   29 never executed
branch 30 never executed
branch 31 never executed
call   32 never executed
branch 33 never executed
branch 34 never executed
call   35 never executed
branch 36 never executed
branch 37 never executed
call   38 never executed
branch 39 never executed
branch 40 never executed
call   41 never executed
branch 42 never executed
branch 43 never executed
call   44 never executed
branch 45 never executed
branch 46 never executed
call   47 never executed
branch 48 never executed
branch 49 never executed
call   50 never executed
branch 51 never executed
branch 52 never executed
call   53 never executed
branch 54 never executed
branch 55 never executed
call   56 never executed
branch 57 never executed
branch 58 never executed
call   59 never executed
call   60 never executed
call   61 never executed
    #####:  452:}
        -:  453:
        -:  454:}  // namespace social_network
        -:  455:
        -:  456:#endif  // SOCIAL_NETWORK_MICROSERVICES_SRC_COMPOSEPOSTSERVICE_COMPOSEPOSTHANDLER_H_
