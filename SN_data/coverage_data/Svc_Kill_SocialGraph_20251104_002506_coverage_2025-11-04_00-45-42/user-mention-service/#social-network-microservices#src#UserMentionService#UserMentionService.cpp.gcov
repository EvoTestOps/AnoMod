        -:    0:Source:/social-network-microservices/src/UserMentionService/UserMentionService.cpp
        -:    0:Graph:/social-network-microservices/build/src/UserMentionService/CMakeFiles/UserMentionService.dir/UserMentionService.cpp.gcno
        -:    0:Data:/social-network-microservices/build/src/UserMentionService/CMakeFiles/UserMentionService.dir/UserMentionService.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include <signal.h>
        -:    2:#include <thrift/protocol/TBinaryProtocol.h>
        -:    3:#include <thrift/server/TThreadedServer.h>
        -:    4:#include <thrift/transport/TBufferTransports.h>
        -:    5:#include <thrift/transport/TServerSocket.h>
        -:    6:
        -:    7:#include "../utils.h"
        -:    8:#include "../utils_memcached.h"
        -:    9:#include "../utils_mongodb.h"
        -:   10:#include "../utils_thrift.h"
        -:   11:#include "UserMentionHandler.h"
        -:   12:#include "nlohmann/json.hpp"
        -:   13:
        -:   14:extern "C" void __gcov_flush();
        -:   15:
        -:   16:using apache::thrift::protocol::TBinaryProtocolFactory;
        -:   17:using apache::thrift::server::TThreadedServer;
        -:   18:using apache::thrift::transport::TFramedTransportFactory;
        -:   19:using apache::thrift::transport::TServerSocket;
        -:   20:using namespace social_network;
        -:   21:
        -:   22:static memcached_pool_st* memcached_client_pool;
        -:   23:static mongoc_client_pool_t* mongodb_client_pool;
        -:   24:
function _Z13sigintHandleri called 0 returned 0% blocks executed 0%
    #####:   25:void sigintHandler(int sig) {
    #####:   26:  if (memcached_client_pool != nullptr) {
branch  0 never executed
branch  1 never executed
    #####:   27:    memcached_pool_destroy(memcached_client_pool);
call    0 never executed
        -:   28:  }
    #####:   29:  if (mongodb_client_pool != nullptr) {
branch  0 never executed
branch  1 never executed
    #####:   30:    mongoc_client_pool_destroy(mongodb_client_pool);
call    0 never executed
        -:   31:  }
    #####:   32:  exit(EXIT_SUCCESS);
        -:   33:}
        -:   34:
function _Z14handle_sigusr1i called 1 returned 0% blocks executed 100%
        1:   35:void handle_sigusr1(int signum) {
        1:   36:  __gcov_flush();
call    0 returned 0%
    #####:   37:}
        -:   38:
function main called 1 returned 0% blocks executed 59%
        1:   39:int main(int argc, char* argv[]) {
        1:   40:  signal(SIGINT, sigintHandler);
call    0 returned 100%
        1:   41:  signal(SIGUSR1, handle_sigusr1);
call    0 returned 100%
        1:   42:  init_logger();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
        1:   43:  SetUpTracer("config/jaeger-config.yml", "user-mention-service");
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
call    5 returned 100%
branch  6 taken 100% (fallthrough)
branch  7 taken 0% (throw)
call    8 returned 100%
branch  9 taken 100% (fallthrough)
branch 10 taken 0% (throw)
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
call   14 returned 100%
call   15 never executed
call   16 never executed
call   17 never executed
call   18 never executed
        -:   44:
        1:   45:  json config_json;
call    0 returned 100%
call    1 never executed
        1:   46:  if (load_config_file("config/service-config.json", &config_json) != 0) {
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
branch  9 taken 0% (fallthrough)
branch 10 taken 100%
call   11 never executed
call   12 never executed
    #####:   47:    exit(EXIT_FAILURE);
call    0 never executed
        -:   48:  }
        -:   49:
        1:   50:  int port = config_json["user-mention-service"]["port"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   51:
        1:   52:  int mongodb_conns = config_json["user-mongodb"]["connections"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   53:  int mongodb_timeout = config_json["user-mongodb"]["timeout_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   54:
        1:   55:  int memcached_conns = config_json["user-memcached"]["connections"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   56:  int memcached_timeout = config_json["user-memcached"]["timeout_ms"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        -:   57:
        -:   58:  memcached_client_pool =
        1:   59:      init_memcached_client_pool(config_json, "user", 32, memcached_conns);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
        -:   60:  mongodb_client_pool =
        1:   61:      init_mongodb_client_pool(config_json, "user", mongodb_conns);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
call   11 never executed
        1:   62:  if (memcached_client_pool == nullptr || mongodb_client_pool == nullptr) {
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
branch  2 taken 0% (fallthrough)
branch  3 taken 100%
    #####:   63:    return EXIT_FAILURE;
        -:   64:  }
        -:   65:
        1:   66:  std::shared_ptr<TServerSocket> server_socket = get_server_socket(config_json, "0.0.0.0", port);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
branch 11 never executed
branch 12 never executed
call   13 never executed
call   14 never executed
        -:   67:
        2:   68:  TThreadedServer server(std::make_shared<UserMentionServiceProcessor>(
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        2:   69:                             std::make_shared<UserMentionHandler>(
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        -:   70:                                 memcached_client_pool, mongodb_client_pool)),
        -:   71:                         server_socket,
        2:   72:                         std::make_shared<TFramedTransportFactory>(),
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        6:   73:                         std::make_shared<TBinaryProtocolFactory>());
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
branch 14 taken 100% (fallthrough)
branch 15 taken 0% (throw)
call   16 returned 100%
call   17 returned 100%
call   18 returned 100%
call   19 returned 100%
call   20 returned 100%
call   21 returned 100%
call   22 never executed
call   23 never executed
call   24 never executed
call   25 never executed
call   26 never executed
call   27 never executed
call   28 never executed
        -:   74:
        2:   75:  LOG(info) << "Starting the user-mention-service server...";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
call   48 never executed
call   49 never executed
        1:   76:  server.serve();
call    0 returned 0%
branch  1 taken 0% (fallthrough)
branch  2 taken 0% (throw)
function _GLOBAL__sub_I__ZN14social_network11init_loggerEv called 1 returned 100% blocks executed 100%
function _Z41__static_initialization_and_destruction_0ii called 1 returned 100% blocks executed 100%
        3:   77:}
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0%
branch  3 taken 100% (fallthrough)
branch  4 taken 0%
