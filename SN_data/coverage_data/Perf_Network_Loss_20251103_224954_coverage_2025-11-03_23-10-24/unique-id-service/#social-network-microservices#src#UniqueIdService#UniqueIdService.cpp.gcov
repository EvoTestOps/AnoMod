        -:    0:Source:/social-network-microservices/src/UniqueIdService/UniqueIdService.cpp
        -:    0:Graph:/social-network-microservices/build/src/UniqueIdService/CMakeFiles/UniqueIdService.dir/UniqueIdService.cpp.gcno
        -:    0:Data:/social-network-microservices/build/src/UniqueIdService/CMakeFiles/UniqueIdService.dir/UniqueIdService.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*
        -:    2: * 64-bit Unique Id Generator
        -:    3: *
        -:    4: * ------------------------------------------------------------------------
        -:    5: * |0| 11 bit machine ID |      40-bit timestamp         | 12-bit counter |
        -:    6: * ------------------------------------------------------------------------
        -:    7: *
        -:    8: * 11-bit machine Id code by hasing the MAC address
        -:    9: * 40-bit UNIX timestamp in millisecond precision with custom epoch
        -:   10: * 12 bit counter which increases monotonically on single process
        -:   11: *
        -:   12: */
        -:   13:
        -:   14:#include <signal.h>
        -:   15:#include <thrift/protocol/TBinaryProtocol.h>
        -:   16:#include <thrift/server/TThreadedServer.h>
        -:   17:#include <thrift/transport/TBufferTransports.h>
        -:   18:#include <thrift/transport/TServerSocket.h>
        -:   19:
        -:   20:#include "../utils.h"
        -:   21:#include "../utils_thrift.h"
        -:   22:#include "UniqueIdHandler.h"
        -:   23:
        -:   24:extern "C" void __gcov_flush();
        -:   25:
        -:   26:using apache::thrift::protocol::TBinaryProtocolFactory;
        -:   27:using apache::thrift::server::TThreadedServer;
        -:   28:using apache::thrift::transport::TFramedTransportFactory;
        -:   29:using apache::thrift::transport::TServerSocket;
        -:   30:using namespace social_network;
        -:   31:
function _Z13sigintHandleri called 0 returned 0% blocks executed 0%
    #####:   32:void sigintHandler(int sig) { exit(EXIT_SUCCESS); }
        -:   33:
function _Z14handle_sigusr1i called 1 returned 0% blocks executed 100%
        1:   34:void handle_sigusr1(int signum) {
        1:   35:  __gcov_flush();
call    0 returned 0%
    #####:   36:}
        -:   37:
function main called 1 returned 0% blocks executed 59%
        1:   38:int main(int argc, char *argv[]) {
        1:   39:  signal(SIGINT, sigintHandler);
call    0 returned 100%
        1:   40:  signal(SIGUSR1, handle_sigusr1);
call    0 returned 100%
        1:   41:  init_logger();
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
        1:   42:  SetUpTracer("config/jaeger-config.yml", "unique-id-service");
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
call    5 returned 100%
branch  6 taken 100% (fallthrough)
branch  7 taken 0% (throw)
call    8 returned 100%
branch  9 taken 100% (fallthrough)
branch 10 taken 0% (throw)
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
call   14 returned 100%
call   15 never executed
call   16 never executed
call   17 never executed
call   18 never executed
        -:   43:
        1:   44:  json config_json;
call    0 returned 100%
call    1 never executed
call    2 never executed
        1:   45:  if (load_config_file("config/service-config.json", &config_json) != 0) {
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
branch  9 taken 0% (fallthrough)
branch 10 taken 100%
call   11 never executed
call   12 never executed
    #####:   46:    exit(EXIT_FAILURE);
call    0 never executed
        -:   47:  }
        -:   48:
        1:   49:  int port = config_json["unique-id-service"]["port"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
        1:   50:  std::string netif = config_json["unique-id-service"]["netif"];
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 never executed
call   10 never executed
        -:   51:
        1:   52:  std::string machine_id = GetMachineId(netif);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 never executed
call    4 never executed
        1:   53:  if (machine_id == "") {
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
branch  3 taken 0% (fallthrough)
branch  4 taken 100%
    #####:   54:    exit(EXIT_FAILURE);
call    0 never executed
        -:   55:  }
        2:   56:  LOG(info) << "machine_id = " << machine_id;
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
branch 48 taken 100% (fallthrough)
branch 49 taken 0% (throw)
call   50 returned 100%
call   51 never executed
call   52 never executed
call   53 never executed
        -:   57:
        1:   58:  std::mutex thread_lock;
        1:   59:  std::shared_ptr<TServerSocket> server_socket = get_server_socket(config_json, "0.0.0.0", port);
call    0 returned 100%
call    1 returned 100%
branch  2 taken 100% (fallthrough)
branch  3 taken 0% (throw)
call    4 returned 100%
branch  5 taken 100% (fallthrough)
branch  6 taken 0% (throw)
call    7 returned 100%
call    8 returned 100%
call    9 never executed
call   10 never executed
call   11 never executed
        -:   60:  TThreadedServer server(
        2:   61:      std::make_shared<UniqueIdServiceProcessor>(
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        2:   62:          std::make_shared<UniqueIdHandler>(&thread_lock, machine_id)),
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        -:   63:      server_socket,
        2:   64:      std::make_shared<TFramedTransportFactory>(),
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 never executed
        6:   65:      std::make_shared<TBinaryProtocolFactory>());
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
branch 14 taken 100% (fallthrough)
branch 15 taken 0% (throw)
call   16 returned 100%
call   17 returned 100%
call   18 returned 100%
call   19 returned 100%
call   20 returned 100%
call   21 returned 100%
call   22 never executed
call   23 never executed
call   24 never executed
call   25 never executed
call   26 never executed
call   27 never executed
call   28 never executed
        -:   66:
        2:   67:  LOG(info) << "Starting the unique-id-service server ...";
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
branch  4 taken 100% (fallthrough)
branch  5 taken 0% (throw)
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
branch 10 taken 50% (fallthrough)
branch 11 taken 50%
call   12 returned 100%
branch 13 taken 100% (fallthrough)
branch 14 taken 0%
call   15 returned 100%
call   16 returned 100%
branch 17 taken 100% (fallthrough)
branch 18 taken 0% (throw)
call   19 returned 100%
call   20 returned 100%
branch 21 taken 100% (fallthrough)
branch 22 taken 0% (throw)
call   23 returned 100%
branch 24 taken 100% (fallthrough)
branch 25 taken 0% (throw)
call   26 returned 100%
branch 27 taken 100% (fallthrough)
branch 28 taken 0% (throw)
call   29 returned 100%
branch 30 taken 100% (fallthrough)
branch 31 taken 0% (throw)
call   32 returned 100%
branch 33 taken 100% (fallthrough)
branch 34 taken 0% (throw)
call   35 returned 100%
branch 36 taken 100% (fallthrough)
branch 37 taken 0% (throw)
call   38 returned 100%
branch 39 taken 100% (fallthrough)
branch 40 taken 0% (throw)
call   41 returned 100%
branch 42 taken 100% (fallthrough)
branch 43 taken 0% (throw)
call   44 returned 100%
branch 45 taken 100% (fallthrough)
branch 46 taken 0% (throw)
call   47 returned 100%
call   48 never executed
call   49 never executed
        1:   68:  server.serve();
call    0 returned 0%
branch  1 taken 0% (fallthrough)
branch  2 taken 0% (throw)
function _GLOBAL__sub_I__ZN14social_network11init_loggerEv called 1 returned 100% blocks executed 100%
function _Z41__static_initialization_and_destruction_0ii called 1 returned 100% blocks executed 100%
        3:   69:}
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0%
branch  3 taken 100% (fallthrough)
branch  4 taken 0%
